<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/admin}">
  <head>
    <title>Đơn hàng - ADMIN</title>
  </head>
  <body>
    <main layout:fragment="content">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h4 class="mb-0">Quản lý đơn hàng</h4>
      </div>

      <div class="card shadow-sm">
        <div class="table-responsive">
          <table class="table table-striped align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th>ID</th>
                <th>Khách hàng</th>
                <th>Thanh toán</th>
                <th>Trạng thái</th>
                <th class="text-end">Tổng</th>
                <th>Ngày tạo</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="o : ${orders.content}">
                <td th:text="${o.id}"></td>
                <td th:text="${o.user != null ? o.user.email : '-'}"></td>
                <td th:text="${o.paymentMethod}"></td>
                <td th:text="${o.orderStatus}"></td>
                <td class="text-end" th:text="${#numbers.formatDecimal(o.totalAmount, 0, 'COMMA', 0, 'POINT')}"></td>
                <td th:text="${o.createdAt != null ? #temporals.format(o.createdAt, 'dd/MM/yyyy HH:mm') : '-'}"></td>
              </tr>
              <tr th:if="${orders.totalElements == 0}">
                <td colspan="6" class="text-center text-muted py-4">Chưa có đơn hàng</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <nav class="mt-3" th:if="${totalPages > 1}">
        <ul class="pagination">
          <li class="page-item" th:classappend="${currentPage == 1} ? ' disabled'">
            <a class="page-link" th:href="@{/admin/orders(page=${currentPage-1}, size=${size})}">Trước</a>
          </li>
          <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}" th:classappend="${i == currentPage} ? ' active'">
            <a class="page-link" th:href="@{/admin/orders(page=${i}, size=${size})}" th:text="${i}"></a>
          </li>
          <li class="page-item" th:classappend="${currentPage == totalPages} ? ' disabled'">
            <a class="page-link" th:href="@{/admin/orders(page=${currentPage+1}, size=${size})}">Sau</a>
          </li>
        </ul>
      </nav>
    </main>
  </body>
</html>
