<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/admin}">
  <head>
    <title>Voucher - ADMIN</title>
  </head>
  <body>
    <main layout:fragment="content">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h4 class="mb-0">Quản lý voucher</h4>
      </div>

      <div class="card shadow-sm">
        <div class="table-responsive">
          <table class="table table-striped align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th>Mã</th>
                <th>% giảm</th>
                <th>Đã dùng</th>
                <th>Trạng thái</th>
                <th>Hiệu lực</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="v : ${vouchers.content}">
                <td th:text="${v.code}"></td>
                <td th:text="${v.discountPercent}"></td>
                <td>
                  <span th:text="${v.usedCount}"></span>
                  <span th:if="${v.usageLimit != null}" class="text-muted">/ <span th:text="${v.usageLimit}"></span></span>
                </td>
                <td>
                  <span class="badge" th:classappend="${v.isActive} ? ' text-bg-success' : ' text-bg-secondary'" th:text="${v.isActive} ? 'Đang bật' : 'Tắt'"></span>
                </td>
                <td>
                  <span th:text="${v.startAt != null ? #temporals.format(v.startAt, 'dd/MM/yyyy') : '-'}"></span>
                  <span class="text-muted">→</span>
                  <span th:text="${v.endAt != null ? #temporals.format(v.endAt, 'dd/MM/yyyy') : '-'}"></span>
                </td>
              </tr>
              <tr th:if="${vouchers.totalElements == 0}">
                <td colspan="5" class="text-center text-muted py-4">Chưa có voucher</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <nav class="mt-3" th:if="${totalPages > 1}">
        <ul class="pagination">
          <li class="page-item" th:classappend="${currentPage == 1} ? ' disabled'">
            <a class="page-link" th:href="@{/admin/vouchers(page=${currentPage-1}, size=${size})}">Trước</a>
          </li>
          <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}" th:classappend="${i == currentPage} ? ' active'">
            <a class="page-link" th:href="@{/admin/vouchers(page=${i}, size=${size})}" th:text="${i}"></a>
          </li>
          <li class="page-item" th:classappend="${currentPage == totalPages} ? ' disabled'">
            <a class="page-link" th:href="@{/admin/vouchers(page=${currentPage+1}, size=${size})}">Sau</a>
          </li>
        </ul>
      </nav>
    </main>
  </body>
</html>
